let audioPlaying=!1,audio=null,refreshedCount=0;function playAudio(a){audioPlaying?(audio&&audio.pause(),audioPlaying=!1):(audio&&audio.src==a||(audio=new Audio(a),audio.volume=.2),audioPlaying=!0,audio.play())}const fetchSpotifyStatus=async()=>{const a=await fetch("https://now-playing.zane.workers.dev/spotify",{method:"GET"});if(200!=a.status)return;const i=await a.json(),t=document.getElementById("now-playing");audioPlaying&&(audio.pause(),audioPlaying=!1,playAudio(i.preview_url)),t.innerHTML='<div id="darken"><img src="'+i.album.images[0].url+'" alt="" onclick="playAudio(\''+i.preview_url+"')\"></div><div><p>I'm listening to:</p><p><a href=\""+i.external_urls.spotify+'">'+i.name+"</a></p><p>"+i.artists.map((a=>'<a class="art" href="'+a.external_urls.spotify+'">'+a.name+"</a>")).join(", ")+"</p></div>"};window.onload=async()=>{await fetchSpotifyStatus();const a=setInterval((async()=>{await fetchSpotifyStatus(),refreshedCount++,refreshedCount>10&&clearInterval(a)}),3e4)};